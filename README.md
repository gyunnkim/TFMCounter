# 🚀 테라포밍 마스 점수 관리 애플리케이션

테라포밍 마스 보드게임의 점수를 관리하고 랭킹을 추적하는 웹 애플리케이션입니다.

## 🌐 라이브 데모
**[https://tfmcounter.vercel.app](https://tfmcounter.vercel.app)**

> 클라우드 기반으로 여러 디바이스에서 실시간 동기화됩니다!

## 📋 주요 기능

### 🎮 게임 관리
- **플레이어 설정**: 3-4명의 플레이어와 큐브 색상 선택
- **맵 선택**: 6개 공식 맵 (THARSIS, HELLAS, ELYSIUM, VASTITAS BOREALIS, UTOPIA PLANITIA, TERRA CIMERIA)
- **기업 선택**: 47개 공식 기업 중 선택 (중복 방지)
- **세분화된 점수 입력**: TR, 업적, 기업상, 드루이드, 숲, 도시, 의회, 카드점수
- **자동 총점 계산**: 각 항목 입력 시 실시간 총점 계산
- **랜덤 기능**: 순서 정하기, 개척기지 뽑기, 맵 랜덤 선택

### 🏆 배지 시스템
- **🌍 테라포머**: TR 가장 높으면서 50점 이상
- **🏆 선구자**: 업적 15점 달성
- **💼 거물**: 기업상 15점 달성
- **🌿 드루이드**: 드루이드 점수 가장 높으면서 20점 이상
- **🏙️ 시장**: 도시 점수 단독 1위
- **🌲 임업가**: 숲 점수 단독 1위
- **🏛️ 정치인**: 의회 점수 단독 1위
- **🃏 수집가**: 카드점수 단독 1위

### 📊 랭킹 시스템
- **플레이어 랭킹**: 1등 횟수 → 2등 횟수 → 3등 횟수 → 평균 점수 순
- **기업별 랭킹**: 기업별 승률 및 평균 점수 분석
- **맵별 랭킹**: 맵별 플레이어 성과 분석
- **상세 통계**: 게임 수, 평균 점수, 등수별 횟수, 획득 배지 표시

### 💾 데이터 관리
- **클라우드 저장**: Vercel KV 데이터베이스에 자동 저장
- **실시간 동기화**: 여러 디바이스 간 데이터 동기화
- **데이터 내보내기**: JSON 파일로 백업 (클라이언트 사이드)
- **게임 기록 관리**: 개별 게임 삭제 및 히스토리 관리

## 🚀 사용 방법

### 1. 플레이어 설정
1. **[https://tfmcounter.vercel.app](https://tfmcounter.vercel.app)** 접속
2. 플레이어 수 선택 (3명 또는 4명)
3. 각 플레이어의 이름 입력
4. "플레이어 설정 완료" 클릭

### 2. 게임 준비
1. **🗺️ 맵 랜덤 선택** 또는 직접 선택
2. **🚀 개척기지 뽑기** (플레이어 수에 따라 5-6개)
3. **🎲 순서 정하기** (선택사항)

### 3. 게임 진행
1. 각 플레이어의 **기업 선택** (47개 중 중복 없이)
2. **세분화된 점수 입력**:
   - TR, 업적, 기업상, 드루이드, 숲, 도시, 의회, 카드점수
   - 총점은 자동 계산됩니다
3. **메가크레딧** 입력
4. "게임 결과 추가" 클릭

### 4. 결과 확인
- **🏆 배지 획득**: 각 분야별 최고 성과 시 자동 부여
- **📊 랭킹**: 1등 횟수 → 2등 횟수 → 3등 횟수 → 평균 점수 순
- **📈 통계**: 플레이어별, 기업별, 맵별 상세 분석

## 📱 반응형 디자인

- 데스크톱과 모바일 모두에서 최적화된 UI
- 터치 친화적인 인터페이스
- 직관적인 사용자 경험

## 🔧 기술 스택

### Frontend
- **HTML5**: 구조적 마크업
- **CSS3**: 모던 스타일링 및 애니메이션 (Grid, Flexbox)
- **Vanilla JavaScript**: 순수 자바스크립트로 구현 (ES6+ 모듈화)

### Backend & Database
- **Vercel**: 서버리스 플랫폼
- **Vercel KV (Redis)**: 클라우드 데이터베이스
- **Node.js**: 서버리스 함수 런타임

### 배포 & 호스팅
- **Vercel**: 자동 배포 및 CDN
- **GitHub**: 소스 코드 관리
- **실시간 동기화**: 멀티 디바이스 지원

## 📂 파일 구조

<details>
<summary>📁 프로젝트 구조 보기</summary>

```
TFMCounter/
├── 📄 index.html                      # 메인 HTML 파일
├── 🎨 styles.css                      # CSS 스타일시트
├── 📁 img/                            # 이미지 파일들
│   ├── 🖼️ terraforming-mars-icon.jpeg # 테라포밍 마스 아이콘
│   ├── 🔴 red-square.svg              # 빨간 큐브 아이콘
│   ├── 🔵 blue-square.svg             # 파란 큐브 아이콘
│   ├── 🟢 green-square.svg            # 초록 큐브 아이콘
│   ├── 🟡 yellow-square.svg           # 노란 큐브 아이콘
│   └── ⚫ black-square.svg            # 검은 큐브 아이콘
├── 📁 api/                            # Vercel 서버리스 함수
│   ├── 📊 data.js                     # 게임 데이터 API
│   ├── 🔄 sync.js                     # 동기화 API
│   └── 📤 export.js                   # 데이터 내보내기 API
├── 📁 script/                         # JavaScript 모듈 디렉토리
│   ├── 🚀 main.js                     # 메인 클래스 및 초기화
│   ├── 👥 playerManager.js            # 플레이어 관리 기능
│   ├── 🎮 gameManager.js              # 게임 관리 및 점수 계산
│   ├── 🏆 rankingManager.js           # 플레이어 랭킹 관리
│   ├── 🏢 corporationRanking.js       # 기업별 랭킹 분석
│   ├── 🗺️ mapRanking.js               # 맵별 랭킹 분석
│   ├── 🎯 orderManager.js             # 순서/개척기지/맵 랜덤 기능
│   ├── 📱 uiManager.js                # UI 인터랙션 (스와이프 등)
│   ├── 📜 historyManager.js           # 게임 히스토리 관리
│   ├── 💾 dataManager.js              # 데이터 저장/불러오기
│   └── 🔄 syncManager.js              # 실시간 동기화 관리
├── ⚙️ vercel.json                     # Vercel 배포 설정
├── 📋 package.json                    # Node.js 의존성 관리
└── 📖 README.md                       # 사용 설명서
```

</details>

### 📋 모듈별 기능 설명

- **main.js**: 메인 클래스 정의, 기업 목록, 이벤트 리스너 초기화
- **playerManager.js**: 플레이어 입력, 설정, 재설정 기능
- **gameManager.js**: 게임 입력, 점수 계산, 순위 결정, 통계 업데이트
- **rankingManager.js**: 플레이어 랭킹 계산 및 표시, 탭 전환 관리
- **corporationRanking.js**: 기업별 성과 분석, 승률 및 통계 계산
- **mapRanking.js**: 맵별 플레이어 성과 분석, 맵별 통계
- **uiManager.js**: 스와이프 제스처, 터치/마우스 인터랙션
- **historyManager.js**: 게임 히스토리 표시, 개별 게임 삭제
- **dataManager.js**: 로컬 저장소 관리, 데이터 내보내기/가져오기

## 🎮 게임 규칙 반영

- **점수 범위**: 0-300점 (일반적으로 200점 이하)
- **동점 처리**: 메가크레딧이 많은 플레이어가 승리
- **공동 등수 없음**: 모든 플레이어는 고유한 순위를 가짐

## 💡 사용 팁

1. **정기적인 백업**: 중요한 데이터는 "데이터 내보내기"로 백업하세요
2. **실수 수정**: 잘못 입력한 게임은 히스토리에서 개별 삭제 가능
3. **플레이어 변경**: 새로운 플레이어로 게임할 때는 "플레이어 재설정" 사용

## 💾 고급 데이터 관리

### 자동 백업 시스템
- **실시간 백업**: 데이터 변경 시 자동으로 백업 생성
- **타임스탬프**: 백업 파일명에 날짜/시간 포함 (`YYYYMMDD_HHMMSS`)
- **자동 정리**: 최근 10개 백업만 유지하여 저장 공간 관리

### 데이터 저장 구조
- **통합 파일**: `data/game_data.json` - 모든 게임 데이터
- **개별 게임**: `data/games/game_*.json` - 게임별 개별 파일
- **백업**: `data/backups/` - 자동 생성되는 백업 파일들

### 실시간 동기화 서버
```bash
# 동기화 서버 실행
python3 sync_server.py

# 접속 URL
# 로컬: http://localhost:3008
# 네트워크: http://[IP주소]:3008
```

## 🐛 문제 해결

- **데이터가 사라졌을 때**: `data/backups/` 폴더에서 최근 백업 파일 확인
- **점수 입력 오류**: 음수나 비정상적인 값은 자동으로 검증됩니다
- **브라우저 호환성**: 모던 브라우저(Chrome, Firefox, Safari, Edge)에서 최적화되어 있습니다
- **동기화 문제**: 서버가 실행 중인지 확인하고 네트워크 연결 상태 점검

---

**즐거운 테라포밍 마스 게임 되세요! 🌍🚀**
